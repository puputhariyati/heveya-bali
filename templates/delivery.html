{% extends 'base.html' %}

{% block title %}Delivery{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='delivery.css') }}">
{% endblock %}

{% block content %}
    <div class="top-bar">
      <label>Filter by Status:</label>
      <select>
        <option>All</option>
        <option>Prepared</option>
        <option>Partially Sent</option>
        <option>Delivered</option>
      </select>
      <label>Filter by Warehouse:</label>
      <select>
        <option>All</option>
        <option>Bali</option>
        <option>Jakarta</option>
      </select>

      <input type="text" placeholder="Search Customer / Order No" />

      <button class="primary">+ Add Delivery</button>
    </div>

    <!-- View Switch Tabs -->
    <div class="tabs">
      <button onclick="showTableView()">Table View</button>
      <button onclick="showCalendarView()">Calendar View</button>
    </div>
    <!-- Calendar Container -->
    <div id="delivery-calendar" style="display:none;"></div>

    <!-- Delivery Table -->
    <div id="delivery-table">
      <h2>Delivery Tracking Table</h2>

      <form method="post" action="/save_delivery_data">
        <!-- Bulk controls -->
        <div style="margin: 10px 0;">
          <label><strong>Bulk Delivery Date:</strong></label>
          <input type="date" id="bulk-delivery-date">
          <button type="button" onclick="applyBulkDate()">Apply to Selected</button>
        </div>

        <table border="1" cellpadding="8" cellspacing="0">
          <thead>
            <tr>
              <th><input type="checkbox" onclick="toggleAll(this)"></th>
              <th>Date</th>
              <th>Order No</th>
              <th>Customer</th>
              <th>Status</th>
              <th>Qty</th>
              <th>Delivered</th>
              <th>Remain Qty</th>
              <th>Purchase No</th>
              <th>Delivery Date</th>
              <th>Warehouse</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><input type="checkbox" class="row-check"></td>
              <td>2025-06-10</td>
              <td>SO-1001</td>
              <td>PT Sejuk Hati</td>
              <td>Heveya Mattress King</td>
              <td><input type="number" class="qty" name="qty" value="2" readonly></td>
              <td><input type="number" class="delivered" name="delivered" min="0" value="0" oninput="updateRemain(this)"></td>
              <td><input type="number" class="remain_qty" name="remain_qty" value="2" readonly></td>
              <td><input type="text" name="purchase_no"></td>
              <td><input type="date" name="delivery_date"></td>
              <td>
                <select name="warehouse">
                  <option value="Warehouse">Warehouse</option>
                  <option value="Showroom">Showroom</option>
                  <option value="Done">Done</option>
                </select>
              </td>
              <td><span class="status-chip red">Not Prepared</span></td>
            </tr>

            <tr>
              <td><input type="checkbox" class="row-check"></td>
              <td>2025-06-12</td>
              <td>SO-1002</td>
              <td>CV Green Living</td>
              <td>Organic Latex Pillow</td>
              <td><input type="number" class="qty" name="qty" value="4" readonly></td>
              <td><input type="number" class="delivered" name="delivered" min="0" value="0" oninput="updateRemain(this)"></td>
              <td><input type="number" class="remain_qty" name="remain_qty" value="4" readonly></td>
              <td><input type="text" name="purchase_no"></td>
              <td><input type="date" name="delivery_date"></td>
              <td>
                <select name="warehouse">
                  <option value="Warehouse">Warehouse</option>
                  <option value="Showroom">Showroom</option>
                  <option value="Done">Done</option>
                </select>
              </td>
              <td><span class="status-chip red">Not Prepared</span></td>
            </tr>
          </tbody>
        </table>

        <br>
        <button type="submit">Save</button>
      </form>
    </div>

    <script src="{{ url_for('static', filename='delivery.js') }}"></script>

{% endblock %}
